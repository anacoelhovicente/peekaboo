!function(e){function t(e){this.peekabooed=[],this.options={root:null,threshold:.25,finishedClass:"peekabooed"},this.options=function(e,t){var i,o={};for(i in e)o[i]=e[i];for(i in t)o[i]=t[i];return o}(this.options,e);var t=this.options.root?this.options.root:document;this.items=t.querySelectorAll("[data-peekaboo]"),this.items.length&&this.initPeekaboo()}var i=t.prototype;i.initPeekaboo=function(){if("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype)this.createObserver();else for(var e=0;e<this.items.length;e++)this.requestAnim(this.items[e])},i.createObserver=function(){for(var e={root:this.options.root,threshold:this.options.threshold},t=new IntersectionObserver(this.observeItem.bind(this),e),i=0;i<this.items.length;i++)t.observe(this.items[i])},i.observeItem=function(e,t){for(var i=0;i<e.length;i++){var o=e[i],n=o.target;o.intersectionRatio>this.options.threshold&&!this.isPeekabooed(n)&&(this.animItem(n),t.unobserve(n))}},i.requestAnim=function(e){if(!this.isPeekabooed(e)){var t=e.getBoundingClientRect(),i=window.innerHeight-t.height*this.options.threshold,o=window.innerHeight-t.width*this.options.threshold;t.top<i&&t.left<o&&0<=t.bottom&&0<=t.right&&this.animItem(e),window.requestAnimationFrame(this.requestAnim.bind(this,e))}},i.animItem=function(e){var t=e.getAttribute("data-peekaboo-delay")?e.getAttribute("data-peekaboo-delay"):0,i=this;this.peekabooed.push(e),setTimeout(function(){e.classList.add(i.options.finishedClass)},t)},i.isPeekabooed=function(e){return 0<=this.peekabooed.indexOf(e)},"function"==typeof define&&define.amd?define(function(){return t}):"undefined"!=typeof module&&module.exports?module.exports=t:e.Peekaboo=t}(this);